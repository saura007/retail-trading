<div class="round-container">
    <div class="round-header">
        <div class="header-content">
            <h1>Round 1</h1>
        </div>
        <app-progress-stepper [currentStep]="currentStep"></app-progress-stepper>
    </div>

    <div class="portfolio-section">
        <div class="label">PORTFOLIO VALUE</div>
        <div class="amount">${{portfolioData.portfolioValue | number}}</div>
        <div class="subtitle">This is your current asset allocation.</div>
    </div>

    <div class="chart-section">
        <app-pie-chart [data]="portfolioData"></app-pie-chart>
        
        <div class="legend">
            <div class="legend-item" *ngFor="let item of portfolioData.assetAllocations">
                <div class="legend-dot" [style.background-color]="item.assetName === 'Tech ETF' ? '#BB86FC' : '#9669CF'"></div>
                <div class="legend-info">
                    <div class="legend-name">{{item.assetName}}</div>
                    <div class="legend-details">
                        {{item.percentage}}%
                        <span class="legend-amount">${{item.allocation | number}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button mat-flat-button class="next-button" (click)="onNext()">
        Next
    </button>
</div>

<app-bottom-sheet
    [isOpen]="isBottomSheetOpen"
    [(amount)]="amount"
    (buy)="onBuy()"
    (sell)="onSell()"
    (confirm)="onConfirmed()"
    (close)="onBottomSheetClose()">
</app-bottom-sheet>